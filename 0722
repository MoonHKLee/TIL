dao 는 무엇을 테스트해야할까?

처음 했던 생각은 dao 는 validation 체크를 할 필요도 없고 메소드 호출 시 결과가 올바르게 적용되었는지만 체크하면 되는것이 아닐까? 생각했었다. 이미 컨트롤러에서 validation 체크는 완료되었다는 생각이 들었고 그렇다면 딱히 입력값에 대한 테스트는 필요 없다고 생각을 했다. 그리고 또 무엇을 테스트해야할 지에 대한 생각도 들지 않았다.

그러나 다시 생각을 해 본 결과 그것이 완전 틀린 생각임을 알 수 있었다.

1. 여러가지 DAO구현체들의 대한 결과로 null이 나올수 있을을 간과했다. DAO에 대한 결과물을 바탕으로 조합을 해서 서비스를 만들수도 있기 때문에 해당 값에 대한 null 처리를 해야한다. 만약에 메소드 인자가 primitive타입만을 사용한다면 null 처리를 할 필요가 없겠지만, 아닐 경우도 있기 때문에 인자가 올바르게 입력되었는지에 대한 검사가 필요하다.
2. 실패했을 때 올바르게 트랜잭션이 적용되는지에 대한 테스트도 필요하다. 근데 이건 어디서 해야하는지에 대한 의문이 조금 있긴 하다. 왜냐하면 보통 서비스의 단위로 묶어서 트랜잭션을 하나로 묶기 때문이다. 개별 트랜잭션에 대한 올바름의 여부를 테스트 해야하는지 조금 의문이 있다.
3. 입력값에 대한 처리와 쿼리가 올바르게 적용되었는지에 대한 테스트만 진행된다면 딱히 다른것들을 테스트 해야할 필요는 없을것 같다.

### 정리

1. dao의 인자값들을 모두 primitive하게 처리하는 것은 어떨까? 그렇다면 null값등 오류 발생에 대한 테스트를 dao에서 처리할 필요가 없어진다.
2. 만약 그렇지 않다면 입력값에 대한 처리를 해주어야 한다.
3. 트랜잭션에 대한 테스트는 서비스에서 진행하자.
